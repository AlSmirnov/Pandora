<pandora-model name="Pandora base model">
  <Pandora name="Pandora Node">
    <Panobject>
      <panhash name="Panhash" type="Panhash" />
      <modified name="Modified" type="Time" />
    </Panobject>

    <Created>
      <creator name="Creator" type="Panhash(Person)" />
      <created name="Created" type="Time" />
    </Created>

  </Pandora>

  <World name="World">

    <Person name="Person|People" table="persons" kind="1">
      <first_name name="Name" type="String" size="30" hash="1:hash(3)" />
      <last_name name="Family" type="String" size="35" hash="2:hash(6)" />
      <birth_day name="Birth day" type="Date" hash="3:date(3)" />
      <birth_place name="Birth place" type="Panhash(City)" hash="4:panhash(4)" />
      <father_name name="Father name" type="String" size="35" hash="5:hash(2)" />
      <mother_name name="Mother name" type="String" size="35" hash="6:hash(2)" />
      <sex name="Sex" type="Combo(sex)" />
      <exit_day name="Exit day" type="Date" optional="yes" />
    </Person>

    <Community parent="Created" name="Community|Communities" kind="2">
      <name name="Name" type="String" size="128" hash="1:hash(4)" />
      <origin_place name="Origin place" type="Panhash(City)" hash="2:panhash(4)" />
      <creator hash="3:panhash(4)" />
      <created hash="4:integer(4)" />
      <RELATIONS name="Состав" kind="Person" default="3" />
    </Community>

    <Language name="Language|Languages"  kind="3">
      <number name="№" type="Word" />
      <code name="Code" type="String" size="2" />
      <name name="Name" type="String" />
    </Language>

    <Country name="Country|Countries" kind="4">
      <code name="Code" />
      <name name="Name" />
      <area name="Area" />
    </Country>

    <City name="City|Cities" kind="5">
      <name name="Name" />
      <country name="Country" type="Panhash(Country)" />
      <population name="Population" />
      <coord name="Coordinates" type="Coord" hash="1:coord(4)" />
    </City>

    <Street name="Street|Streets" kind="6">
      <city name="Panhash(City)" />
      <name name="Name" />
    </Street>

    <Address name="Address|Addresses" kind="7">
      <city name="City" />
      <street name="Street" />
      <building name="Building" />
      <appartment name="Appartment" />
    </Address>

    <Contact name="Contact|Contacts" kind="8">
      <type name="Type" />
      <value name="Value" />
      <owner_list name="Owner list" />
    </Contact>

    <Document name="Document" kind="9">
      <type name="Type" />
      <code name="Number" />
      <target name="Target" />
    </Document>

    <Currency name="Currency|Currency" kind="10">
      <name name="Name" />
      <code name="Code" />
      <country name="Country" />
      <issuer name="Issuer" />
    </Currency>

    <Activity name="Activity" kind="11">
      <name name="Name" />
      <description name="Description" />
    </Activity>

    <Thing name="Thing|Things" kind="12">
      <name name="Name" />
      <desc name="Description" />
    </Thing>

    <Word name="Word|Words" kind="13">
      <name name="Name" />
      <description name="Description" />
    </Word>

    <Article name="Article" kind="14" parent="Created">
      <name name="Name" type="String" size="512" hash="1:hash(6)" />
      <type name="Type" type="Word" />
      <text name="Text" type="Text" hash="2:hash(14)" />
      <hash name="SHA1" type="String" size="20" />
      <size name="Size" type="Integer" />
    </Article>

    <Blob name="File" kind="15" parent="Article">
      <path name="Path" type="String" size="1024" />
      <text name="Blob" />
    </Blob>

    <Relation name="Relation" kind="16" lang="no">
      <first name="First object" size="50" />
      <second name="Second object" size="50" />
      <type name="Type" type="Byte" />
    </Relation>

    <Opinion name="Opinion" kind="17">
      <object name="Object" />
      <creator name="Creator" />
      <date name="Date" type="Date" />
      <score name="Score" type="Integer" />
      <comment name="Comment" />
    </Opinion>

  </World>
  <Business name="Business">

    <Member parent="Person">
    </Member>

    <Company parent="Community">
    </Company>

    <Storage parent="Address">
    </Storage>

    <Product parent="Thing">
    </Product>

    <Service parent="Activity">
    </Service>

    <Ad parent="Article">
    </Ad>

    <Order parent="Created">
      <ad name="Ad" type="String" size="32" />
      <list name="List" type="Text" />
      <sum name="Sum" type="Real" />
    </Order>

    <Deal parent="Created">
    </Deal>

    <Waybill parent="Created">
    </Waybill>

    <Debt parent="Created">
    </Debt>

    <Guaranty parent="Created">
    </Guaranty>

    <Contract parent="Article">
      <number name="Number" />
      <city name="City" />
    </Contract>

    <Report parent="Article">
    </Report>

  </Business>
  <Region name="Region">

    <Law name="Low|Lows" parent="Article">
      <number name="Number" />
    </Law>

    <Delegation parent="Created">
      <delegate name="Delegate" type="String" size="32" />
      <activity name="Activity" type="String" size="32" />
      <creator hash="1:panhash(15)" />
      <created hash="2:integer(4)" />
      <expire name="Expire" type="Time" />
    </Delegation>

  </Region>
  <Pandora lang="no">

    <Parameter name="Parameter" kind="220">
      <name name="Name" type="String" size="128" />
      <desc name="Description" type="String" size="128" />
      <value name="Value" type="Blob" />
      <type name="Type" type="Integer" />
      <section name="Section" type="Integer" />
      <setting name="Setting" type="Blob" />
    </Parameter>

    <Key name="Key" kind="221" parent="Created">
      <kind name="Kind" type="Byte" />
      <creator hash="1:panhash(15)" />
      <created hash="2:integer(4)" />
      <expire name="Expire" type="Time" />
      <cipher name="Ciphered" type="Word" />
      <body name="Body" type="Blob" hash="3:crc32(4)" />
    </Key>

    <Sign name="Sign" kind="222" parent="Created">
      <obj_hash name="Object panhash" type="String" size="32" />
      <key_hash name="Key panhash" type="String" size="32" />
      <packed name="Packed" type="Byte" />
      <sign name="Sign" type="Blob" />
    </Sign>

    <Node name="Node" kind="223">
      <addr name="Address" type="String" size="20" />
      <tport name="TCP port" type="Word" />
      <uport name="UDP port" type="Word" />
      <domain name="Domain" type="String" size="255" />
      <base_id name="Origin" type="String" size="32" />
      <city name="City" type="[City]" />
      <home name="Home" type="[Address]" />
      <coord name="Coord" type="Integer" />
      <state name="State" type="Word" />
      <sended name="Sended" type="Integer" />
      <received name="Recieved" type="Integer" />
      <bad_attempts name="Bad attempts" type="Integer" />
      <ban_time name="Time of ban" type="Time" />
      <one_ip_count name="Connection from one IP" type="Integer" />
      <session_key name="Panhash of last session key" type="String" size="32" />
      <last_conn_time name="Last connection" type="Time" />
      <try_upnp_time name="Last UPnP try" type="Time" />
      <try_natpmp_time name="Last NAT-PMP try" type="Time" />
      <last_link_time name="Last received link" type="Time" />
      <last_trust_time name="Last received trust" type="Time" />
    </Node>

    <Patch name="Patch" kind="224">
      <kind name="Kind" type="Integer" />
      <origin name="Origin" type="String" size="32" />
      <creator name="Creator" type="String" size="64" />
      <oldsha1 name="Old hash" type="Blob" size="32" />
      <sha1 name="New hash" type="Blob" size="32" />
      <date name="Date" />
      <delta name="Delta" type="Blob" />
    </Patch>

    <Event name="Event" kind="225">
      <time name="Time" type="Date" />
      <kind name="Kind" type="Integer" />
      <origin name="Origin" type="String" size="32" />
      <sha2 name="Hash" type="Blob" size="32" />
      <creator name="Creator" type="String" size="128" />
      <message name="Message" type="String" />
    </Event>

    <Repository name="Repository" kind="226">
      <name name="Name" type="String" size="128" />
      <kind name="Kind" type="String" size="32" />
      <place name="Place" type="Blob" />
    </Repository>

    <Message name="Message" kind="227">
      <room name="Room" />
      <state name="State" />
      <date name="Date" />
      <text name="Text" />
    </Message>

  </Pandora>

  <Defaults>
    <section_common desc="Common" type="Integer" section="0" setting="0" />
    <section_net desc="Network" type="Integer" section="0" setting="1" />
    <section_crypto desc="Crypto" type="Integer" section="0" setting="2" />
    <base_id desc="Base ID" type="String" section="node" setting="[create_base_id]" />
    <tcp_port desc="TCP port" type="Integer" section="net" setting="5577" />
    <udp_port desc="UDP port" type="Integer" section="net" setting="5577" />
    <local_host desc="Local host" type="String" section="net" setting="localhost" />
    <last_auth_key desc="Last auth key" type="String" section="crypto" setting="" />
  </Defaults>

</pandora-model>

